(function(){"use strict";define(["console","humane","moment"],function(e,t,n){return function(r,i,s,o,u,a){var f,l;return e.group("order"),r.page=1,r.search=function(){return r.page=1,r.getData()},r.pageSize=10,r.pages=[10,25,50,100],r.footer="partials/grid/grid_footer.html",r.header="partials/grid/grid_header.html",r.$watch("pageSize",function(e){return r.getData()}),r.$watch("page",function(e){return r.getData()}),l=function(e){switch(e){case 0:return"下单成功";case 1:return"确认成功";case 2:return"订单完成";case 3:return"订单取消";case 4:return"开始配送"}},f=[],r.requesting=!1,r.externalScopes=r.gridOptions={enableSorting:!1,columnDefs:[{name:"状态",field:"status",width:100,enableSorting:!1},{name:"订单详情",field:"detail",enableSorting:!1},{name:"总价",field:"total_fee",width:60,enableSorting:!1},{name:"联系人",field:"contact",width:100,enableSorting:!1},{name:"地址",field:"full_address",width:100,enableSorting:!1},{name:"确认时间",field:"confirmed_time",width:180,enableSorting:!1},{name:"创建时间",field:"created_at",width:180,enableSorting:!1}]},r.getData=function(){if(r.requesting)return;return r.requesting=!0,i.get("/m/order/list",{params:{page:r.page,pageSize:r.pageSize,keywords:r.keywords}}).success(function(i){return e.group("order"),e.log("GotOrder",i),e.groupEnd(),r.requesting=!1,i.err?t.log(i.err):(r.count=i.count,i.result&&i.result.forEach(function(e){return e.status=l(e.status),e.full_address=e.areas.join(" ")+" "+e.address,e.confirmed_time=n(e.confirmed_time).format("YYYY-MM-DD HH:mm:ss"),e.created_at=n(e.created_at).format("YYYY-MM-DD HH:mm:ss")}),r.gridOptions.data=i.result)}).error(function(e){r.requesting=!1;if(e)return t.log(e)})},r.getData(),e.groupEnd()}})}).call(this);