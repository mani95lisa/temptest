(function(){define(["console","humane","moment"],function(e,t,n){return function(n,r,i,s,o,u,a,f){var l,c,h;return e.group("setting"),l=function(t,i,s,o){getDict(r,t,function(r){e.log(r),s?r&&o?n[s][t]=r[o]:n[s][t]=r:n[t]=r;if(r&&i)return i(r)})},h=function(i,s,o,u){var a,f;u?f={key:i,list:s}:f=s,f.key=i,a=[],f.list.forEach(function(e){return a.push(e.text)}),f.list=a,n.handling=!0,e.log(f),r.post("/dict/update/list",f).success(function(e){return n.handling=!1,e.err?t.log(e.err):o(!0)})},n.update=function(e){var i;i={},i.key=e,i.value=n[e].value,i._csrf=csrf,r.post("/dict/update/list",i).success(function(e){return n.handling=!1,e.err?t.log(e.err):t.log("更新成功")})},c=function(e){if(e.err)return t.log(e.err)},n.tagAdded=function(e){return h(e,n[e],c)},n.tagRemoved=function(e){return h(e,n[e],c)},l("LotteryRatio"),l("LotteryLimit"),n.Pros={},n.proRemoved=function(e){return h(e,n.Pros[e],c,!0)},n.proAdded=function(e){return h(e,n.Pros[e],c,!0)},l("Areas",function(e){var t,n,r,i,s;if(e&&e.list&&e.list.length){i=e.list,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(function(e){return l(e,null,"Pros","list")}(t));return s}}),n.loadTags=function(e){var t;return t=i.defer(),t.resolve(s("filter")(n.Building.list,e)),t.promise},e.groupEnd()}})}).call(this);