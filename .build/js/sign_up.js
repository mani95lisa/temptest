(function(){var e;e={init:function(){var t,n,r,i,s,o,u;return this.windowWidth=$(window).width(),this.windowHeight=$(window).height(),this.scale=this.windowWidth/640,e.position($("#form"),520,469,56,200),$(".field").css({width:520*this.scale,height:100*this.scale}),$(".field input").css({width:440*this.scale,height:100*this.scale,"padding-left":40*this.scale}),$(".verify_btn").css({width:180*this.scale,height:100*this.scale}),e.position($(".verify_btn"),180,100,396,$("#code_field").offset().top/this.scale),$(".verify_text").css({height:100*this.scale,"line-height":100*this.scale+"px",padding:0}),i=!1,n="",t=60,o=function(){return i?($(".verify_btn").css({background:"#cccccc"}),$(".verify_text").text("重发("+t+")"),n=setInterval(function(){return t<=0?(clearInterval(n),i=!1,t=60,o()):($(".verify_text").text("重发("+t+")"),t--)},1e3)):($(".verify_btn").css({background:"#F1B424"}),$(".verify_text").text("获取验证码"))},$(".verify_btn").click(function(){var e;if(!i)return i=!0,o(),e={mobile:$("#mobileNum").val(),_csrf:$("#csrf").val()},$.post("/verify_code",e,function(e){if(e.err)return alert(e.err),i=!1,t=0,o()})}),$("#submit_btn").css({width:520*this.scale,height:100*this.scale}),$("#switch_btn").css({width:520*this.scale,height:100*this.scale}),r=!1,s=!0,u=function(){return s?($("#submit_btn").attr("src","imgs/sign_up_and_lottery.png"),$("#switch_btn").attr("src","imgs/sign_in.png"),$("#code_field").show(),$("#nickname").show(),$(".verify_btn").show()):($("#submit_btn").attr("src","imgs/sign_in_and_lottery.png"),$("#switch_btn").attr("src","imgs/sign_up.png"),$("#code_field").hide(),$("#nickname").hide(),$(".verify_btn").hide())},$("#switch_btn").click(function(){return s=!s,u()}),u(),$("#submit_btn").click(function(){var e,t,n;if(!r)return r=!0,e=$("#form").serializeArray(),t={},e.forEach(function(e){return t[e.name]=e.value}),n=s?"/do_sign_up":"/do_sign_in",$.post(n,t,function(e){return e.err?(r=!1,alert(e.err)):window.location="/draw_lottery"}).fail(function(){return r=!1})})},position:function(e,t,n,r,i){return e.css({position:"absolute",width:t*this.scale,height:n*this.scale,top:i*this.scale,left:r*this.scale})}},$(document).ready(function(){return e.init()})}).call(this);